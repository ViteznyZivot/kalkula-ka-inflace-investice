<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkula캜ka Investice vs Inflace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4">
    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">游눯 Kalkula캜ka Investice vs Inflace</h1>
            <p class="text-gray-600">Zjist캩te, jak si va코e investice vedou proti inflaci</p>
        </div>

        <div class="grid md:grid-cols-2 gap-6 mb-8">
            <!-- Vstupn칤 formul치콏 -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">游늵 Parametry v칳po캜tu</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Po캜치te캜n칤 investice (K캜)</label>
                        <input type="number" id="initialAmount" value="100000" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ro캜n칤 v칳nos investice (%)</label>
                        <input type="number" id="investmentReturn" value="7" step="0.1"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ro캜n칤 inflace (%)</label>
                        <input type="number" id="inflationRate" value="3" step="0.1"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">M캩s칤캜n칤 investice (K캜)</label>
                        <input type="number" id="monthlyInvestment" value="5000" min="0"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <p class="text-xs text-gray-500 mt-1">Zadejte 0 pro jednor치zovou investici</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Po캜et let</label>
                        <input type="number" id="years" value="10" min="1" max="50"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <button onclick="calculate()" 
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
                        游빑 Vypo캜칤tat
                    </button>
                </div>
            </div>

            <!-- V칳sledky -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">游늳 V칳sledky</h2>
                
                <div id="results" class="space-y-4">
                    <div class="text-center text-gray-500 py-8">
                        <div class="text-4xl mb-2">游늵</div>
                        <p>Zadejte parametry a klikn캩te na "Vypo캜칤tat"</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Graf -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">游늵 V칳voj v 캜ase</h2>
            <div id="chart" class="h-64 flex items-center justify-center text-gray-500">
                <div class="text-center">
                    <div class="text-4xl mb-2">游늳</div>
                    <p>Graf se zobraz칤 po v칳po캜tu</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function formatCurrency(amount) {
            return new Intl.NumberFormat('cs-CZ', {
                style: 'currency',
                currency: 'CZK',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function calculate() {
            const initialAmount = parseFloat(document.getElementById('initialAmount').value);
            const monthlyInvestment = parseFloat(document.getElementById('monthlyInvestment').value) || 0;
            const investmentReturn = parseFloat(document.getElementById('investmentReturn').value) / 100;
            const inflationRate = parseFloat(document.getElementById('inflationRate').value) / 100;
            const years = parseInt(document.getElementById('years').value);

            if (isNaN(initialAmount) || isNaN(investmentReturn) || isNaN(inflationRate) || isNaN(years)) {
                alert('Pros칤m zadejte v코echny hodnoty spr치vn캩');
                return;
            }

            // V칳po캜ty s m캩s칤캜n칤mi investicemi
            const monthlyReturn = investmentReturn / 12;
            const totalMonths = years * 12;
            
            // Hodnota po캜치te캜n칤 investice
            const initialFinalValue = initialAmount * Math.pow(1 + investmentReturn, years);
            
            // Hodnota m캩s칤캜n칤ch investic (budouc칤 hodnota anuity)
            let monthlyFinalValue = 0;
            if (monthlyInvestment > 0) {
                monthlyFinalValue = monthlyInvestment * (Math.pow(1 + monthlyReturn, totalMonths) - 1) / monthlyReturn;
            }
            
            const finalInvestmentValue = initialFinalValue + monthlyFinalValue;
            const totalInvested = initialAmount + (monthlyInvestment * totalMonths);
            
            const inflationAdjustedValue = totalInvested * Math.pow(1 + inflationRate, years);
            const realValue = finalInvestmentValue / Math.pow(1 + inflationRate, years);
            const realGain = realValue - totalInvested;
            const realReturnRate = totalInvested > 0 ? ((realValue / totalInvested) ** (1/years) - 1) * 100 : 0;

            // Zobrazen칤 v칳sledk콢
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="space-y-4">
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                        <div class="flex items-center mb-2">
                            <span class="text-gray-600 text-xl mr-2">游눯</span>
                            <h3 class="font-semibold text-gray-800">Celkem investov치no</h3>
                        </div>
                        <p class="text-2xl font-bold text-gray-700">${formatCurrency(totalInvested)}</p>
                        <p class="text-sm text-gray-600">${formatCurrency(initialAmount)} + ${monthlyInvestment > 0 ? formatCurrency(monthlyInvestment * totalMonths) + ' m캩s칤캜n캩' : '0 m캩s칤캜n캩'}</p>
                    </div>

                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex items-center mb-2">
                            <span class="text-green-600 text-xl mr-2">游늳</span>
                            <h3 class="font-semibold text-green-800">Hodnota investice</h3>
                        </div>
                        <p class="text-2xl font-bold text-green-700">${formatCurrency(finalInvestmentValue)}</p>
                        <p class="text-sm text-green-600">Po ${years} letech (zisk: ${formatCurrency(finalInvestmentValue - totalInvested)})</p>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-center mb-2">
                            <span class="text-blue-600 text-xl mr-2">游눑</span>
                            <h3 class="font-semibold text-blue-800">Re치ln치 hodnota</h3>
                        </div>
                        <p class="text-2xl font-bold text-blue-700">${formatCurrency(realValue)}</p>
                        <p class="text-sm text-blue-600">O캜i코t캩no o inflaci</p>
                    </div>

                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                        <div class="flex items-center mb-2">
                            <span class="text-purple-600 text-xl mr-2">游꿢</span>
                            <h3 class="font-semibold text-purple-800">Re치ln칳 v칳nos</h3>
                        </div>
                        <p class="text-2xl font-bold text-purple-700">${realReturnRate.toFixed(2)}% ro캜n캩</p>
                        <p class="text-sm text-purple-600">Re치ln칳 zisk: ${formatCurrency(realGain)}</p>
                    </div>
                </div>
            `;

            // Vytvo콏en칤 grafu
            createChart(initialAmount, monthlyInvestment, investmentReturn, inflationRate, years);
        }

        function createChart(initialAmount, monthlyInvestment, investmentReturn, inflationRate, years) {
            const chartDiv = document.getElementById('chart');
            
            // V칳po캜et maxim치ln칤 hodnoty pro 코k치lov치n칤 grafu
            const monthlyReturn = investmentReturn / 12;
            const totalMonths = years * 12;
            const initialFinalValue = initialAmount * Math.pow(1 + investmentReturn, years);
            let monthlyFinalValue = 0;
            if (monthlyInvestment > 0) {
                monthlyFinalValue = monthlyInvestment * (Math.pow(1 + monthlyReturn, totalMonths) - 1) / monthlyReturn;
            }
            const maxValue = initialFinalValue + monthlyFinalValue;
            
            let chartHTML = '<div class="w-full h-full relative">';
            
            // Osa Y (hodnoty)
            chartHTML += '<div class="absolute left-0 top-0 h-full w-16 flex flex-col justify-between text-xs text-gray-600">';
            for (let i = 5; i >= 0; i--) {
                const value = (maxValue / 5) * i;
                chartHTML += `<div class="text-right pr-2">${formatCurrency(value).replace(' K캜', 'K')}</div>`;
            }
            chartHTML += '</div>';

            // Oblast grafu
            chartHTML += '<div class="ml-16 mr-4 h-full relative border-l-2 border-b-2 border-gray-300">';
            
            // 캛치ry investice a inflace
            let investmentPoints = '';
            let totalInvestedPoints = '';
            let realValuePoints = '';
            
            for (let year = 0; year <= years; year++) {
                const x = (year / years) * 100;
                
                // Hodnota investice s m캩s칤캜n칤mi p콏칤sp캩vky
                const monthsElapsed = year * 12;
                const initialValue = initialAmount * Math.pow(1 + investmentReturn, year);
                let monthlyValue = 0;
                if (monthlyInvestment > 0 && monthsElapsed > 0) {
                    monthlyValue = monthlyInvestment * (Math.pow(1 + monthlyReturn, monthsElapsed) - 1) / monthlyReturn;
                }
                const investmentValue = initialValue + monthlyValue;
                const investmentY = 100 - (investmentValue / maxValue) * 100;
                
                // Celkov치 investovan치 캜치stka
                const totalInvested = initialAmount + (monthlyInvestment * monthsElapsed);
                const totalInvestedY = 100 - (totalInvested / maxValue) * 100;
                
                // Re치ln치 hodnota
                const realValue = investmentValue / Math.pow(1 + inflationRate, year);
                const realY = 100 - (realValue / maxValue) * 100;
                
                investmentPoints += `${x},${investmentY} `;
                totalInvestedPoints += `${x},${totalInvestedY} `;
                realValuePoints += `${x},${realY} `;
            }

            chartHTML += `
                <svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                    <polyline points="${investmentPoints}" fill="none" stroke="#10B981" stroke-width="0.5" />
                    <polyline points="${totalInvestedPoints}" fill="none" stroke="#6B7280" stroke-width="0.5" />
                    <polyline points="${realValuePoints}" fill="none" stroke="#3B82F6" stroke-width="0.5" />
                </svg>
            `;

            chartHTML += '</div>';

            // Legenda
            chartHTML += `
                <div class="absolute bottom-0 right-0 bg-white border border-gray-200 rounded p-2 text-xs">
                    <div class="flex items-center mb-1">
                        <div class="w-3 h-0.5 bg-green-500 mr-2"></div>
                        <span>Hodnota investice</span>
                    </div>
                    <div class="flex items-center mb-1">
                        <div class="w-3 h-0.5 bg-blue-500 mr-2"></div>
                        <span>Re치ln치 hodnota</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-3 h-0.5 bg-gray-500 mr-2"></div>
                        <span>Investov치no celkem</span>
                    </div>
                </div>
            `;

            // Osa X (roky)
            chartHTML += '<div class="absolute bottom-0 left-16 right-4 flex justify-between text-xs text-gray-600 mt-2">';
            for (let i = 0; i <= Math.min(years, 10); i += Math.max(1, Math.floor(years / 10))) {
                chartHTML += `<div>${i}</div>`;
            }
            chartHTML += '</div>';

            chartHTML += '</div>';
            
            chartDiv.innerHTML = chartHTML;
        }

        // Automatick칳 v칳po캜et p콏i zm캩n캩 hodnot
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = ['initialAmount', 'monthlyInvestment', 'investmentReturn', 'inflationRate', 'years'];
            inputs.forEach(id => {
                document.getElementById(id).addEventListener('input', calculate);
            });
            calculate(); // Po캜치te캜n칤 v칳po캜et
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9872700da400b38c',t:'MTc1OTIyMTg1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
